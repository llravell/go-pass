syntax = "proto3";

import "google/protobuf/empty.proto";
import "api/conflict.proto";
package api.passwords;

option go_package = "pkg/grpc";

service Passwords {
  rpc Sync(Password) returns (PasswordSyncResponse);
  rpc Delete(PasswordDeleteRequest) returns (google.protobuf.Empty);
  rpc List(google.protobuf.Empty) returns (PasswordListResponse);
}

message Password {
  string name = 1;
  string value = 2;
  string meta = 3;
  int32 version = 4;
}

message PasswordConflict {
  conflict.ConflictType type = 1;
  Password password = 2;
}

message PasswordSyncResponse {
  bool success = 1;
  optional PasswordConflict conflict = 2;
}

message PasswordDeleteRequest {
  string name = 1;
}

message PasswordListResponse {
  repeated Password passwords = 1;
}
